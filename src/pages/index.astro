---
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import GithubCalendar from '@/components/bento/GithubCalendar.tsx'
import SpotifyPresence from '@/components/bento/SpotifyPresence.tsx'
import WakatimeGraph from '@/components/bento/WakatimeGraph.tsx'
import { buttonVariants } from '@/components/ui/button'
import { SITE, SOCIAL_LINKS } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getRecentPosts } from '@/lib/data-utils'
import { cn } from '@/lib/utils'
import { Icon } from 'astro-icon/components'

const blog = await getRecentPosts(SITE.featuredPostCount)
---

<Layout class="max-w-5xl">
  <PageHead slot="head" title="Home" />
  <section
    class={cn(
      'mx-auto grid min-w-xs sm:has-[[data-trigger]:hover]:*:first:[&_[data-overlay]]:opacity-0',

      // Mobile
      'max-w-sm grid-cols-2 [grid-template-areas:"a_a""b_b""c_c""d_e"]',
      'sm:max-w-2xl sm:grid-cols-2 sm:[grid-template-areas:"a_a""b_b""c_c""e_d"]',
      'lg:max-w-5xl lg:grid-cols-3 lg:[grid-template-areas:"b_c_c""a_d_e"]',

      // XL (original)
      'xl:max-w-7xl xl:grid-cols-4 xl:[grid-template-areas:"b_a_a_a""b_c_c_d""e_f_f_g""h_i_j_k"]',
    )}
  >
    <div
      class="aspect-square rounded-lg p-2 duration-300 ease-in-out [grid-area:a] sm:aspect-[3/1] lg:aspect-[3/1] xl:aspect-[3/1]"
    >
      <div
        class="bg-primary-foreground/70 hover:bg-primary-foreground rounded-lg border"
      >
        <div class="flex flex-col space-y-1.5 p-6 pb-3">
          <h3 class="text-3xl leading-none font-medium">
            Hey!
          </h3>
          <p class="text-muted-foreground text-sm">
            I&rsquo;m Mark, an undergrad student from Polytechnic University of the
            Philippines - San Juan Campus.
          </p>
        </div>
        <div class="p-6 pt-0">
          <div class="text-muted-foreground mb-2 text-sm">
            This website serves as my personal online portfolio, a space where I
            document my growth, showcase my work, and reflect on my journey.
            Here, you’ll find my academic and personal projects, writings,
            creative experiments, and a few multimedia pieces along the way.
          </div>
          <div class="text-muted-foreground mb-2 text-sm">
            I’m also passionate about web development and UI/UX design, and many
            of the projects here reflect my ongoing exploration in those fields.
            Feel free to look around and get to know me better!
          </div>
          <div class="text-muted-foreground mb-2 text-sm">
            This website is my corner of the internet, something I can really call mine, something that represents me. 
            So, feel free to look around and get to know me better!
          </div>

          <!-- <p class="text-muted-foreground mb-2 text-sm">
          astro-erudite is an opinionated, unstyled static blogging template
          built with <Link
            href="https://astro.build"
            class="text-foreground"
            external
            underline>Astro</Link
          >, <Link
            href="https://tailwindcss.com"
            class="text-foreground"
            external
            underline>Tailwind</Link
          >, and <Link
            href="https://ui.shadcn.com"
            class="text-foreground"
            external
            underline>shadcn/ui</Link
          >. Extraordinarily loosely based on the <Link
            href="https://astro-micro.vercel.app/"
            class="text-foreground"
            external
            underline>Astro Micro</Link
          > theme.
        </p>
        <p class="text-muted-foreground text-sm">
          To use this template, check out the <Link
            href="https://github.com/jktrn/astro-erudite"
            class="text-foreground"
            underline
            external>GitHub</Link
          > repository. To learn more about why this template exists, read this blog
          post: <Link
            href="/blog/the-state-of-static-blogs"
            class="text-foreground"
            underline>The State of Static Blogs in 2024</Link
          >.
        </p> -->
        </div>
      </div>
    </div>
    <div
      class="aspect-square p-2 [grid-area:b] sm:aspect-square xl:aspect-[1/2]"
    >
      <div class="bg-muted size-full rounded-lg border">
        <div
          class="size-full bg-[url('/static/profile/silhouette.jpg')] bg-cover bg-center bg-no-repeat rounded-lg"
        >
        </div>
      </div>
    </div>
    <div class="aspect-square p-2 [grid-area:c] sm:aspect-[2/1]">
      <div
        data-trigger
        class="bg-primary-foreground/70 hover:bg-primary-foreground relative size-full rounded-lg border"
      >
        <div class="absolute size-full">
          <div
            class="absolute size-full transition-opacity duration-200 sm:opacity-0 sm:hover:opacity-100"
          >
            <p
              class="text-foreground/80 bg-background absolute top-[50%] left-[38%] -translate-y-1/2 border p-2 text-xs text-pretty sm:block hidden"
            >
              My GitHub calendar!
            </p>
          </div>
        </div>
        <div class="flex size-full items-center justify-center p-8">
          <GithubCalendar username="pulge" client:load />
        </div>
      </div>
    </div>
    <div class="aspect-square p-2 [grid-area:e]">
      <div
        data-trigger
        class="bg-primary-foreground/70 hover:bg-primary-foreground size-full rounded-lg border"
      >
        <div class="group/spotify relative size-full">
          <div
            class="absolute size-full transition-opacity sm:opacity-0 sm:group-hover/spotify:opacity-100"
          >
          </div>
          <div class="flex size-full items-center justify-center">
            <SpotifyPresence client:load />
          </div>
        </div>
      </div>
    </div>
    <div class="aspect-square p-2 [grid-area:d]">
      <div
        class="bg-primary-foreground/70 hover:bg-primary-foreground size-full rounded-lg border"
      >
        <div
          class="group/github relative flex size-full items-center justify-center"
        >
          <Icon
            name="mdi:github"
            class="text-primary absolute size-1/2 sm:size-24"
            aria-hidden="true"
          />
          <Link
            href={SOCIAL_LINKS.find((link) => link.label === 'GitHub')?.href ||
              '#'}
            title="Visit my GitHub profile"
            aria-label="Visit my GitHub profile"
            external
            class="bg-border/50 text-primary ring-ring group/github-link absolute end-0 bottom-0 m-3 rounded-full p-3 transition-[box-shadow] duration-300 hover:ring-2 focus-visible:ring-2"
          >
            <Icon
              name="lucide:move-up-right"
              class="transition-transform duration-300 group-hover/github-link:rotate-12"
              size={16}
            />
          </Link>
        </div>
      </div>
    </div>
    <!-- <div class="aspect-square p-2 [grid-area:j]">
      <div class="bg-muted size-full border">
        <WakatimeGraph client:load />
      </div>
    </div> -->
  </section>
  <!-- <section class="flex flex-col gap-y-4">
    <h2 class="text-2xl font-medium">Latest posts</h2>
    <ul class="flex flex-col gap-y-4">
      {
        blog.map((post) => (
          <li>
            <BlogCard entry={post} />
          </li>
        ))
      }
    </ul>
    <div class="flex justify-center">
      <Link
        href="/blog"
        class={buttonVariants({ variant: 'ghost' }) + ' group'}
      >
        See all posts <span
          class="ml-1.5 transition-transform group-hover:translate-x-1"
          >&rarr;</span
        >
      </Link>
    </div>
  </section> -->
</Layout>
